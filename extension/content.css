:root {
  --cf-bg: hsl(0 0% 100%);
  --cf-fg: hsl(222 47% 11%);
  --cf-muted: hsl(215 16% 47%);
  --cf-border: hsl(214 32% 91%);
  --cf-surface: hsl(0 0% 100%);
  --cf-brand-start: hsl(258 91% 64%);
  --cf-brand-end: hsl(198 95% 55%);
  --cf-radius: 12px;
  --cf-shadow: 0 20px 60px hsl(220 40% 2% / 0.2);
}

.cf-overlay { 
  position: fixed; 
  inset: 0; 
  z-index: 2147483647; 
  display: none; 
  overflow-y: auto;
  padding: 20px;
  box-sizing: border-box;
}

.cf-overlay[data-open="true"] { display: block; }

.cf-backdrop { 
  position: fixed; 
  inset: 0; 
  background: hsl(220 10% 10% / 0.4); 
  backdrop-filter: blur(2px); 
}

.cf-modal { 
  position: relative; 
  margin: 0 auto; 
  max-width: 720px; 
  min-height: fit-content;
  max-height: calc(100vh - 40px);
  background: var(--cf-surface); 
  color: var(--cf-fg); 
  border: 1px solid var(--cf-border); 
  border-radius: var(--cf-radius); 
  box-shadow: var(--cf-shadow); 
  overflow: hidden;
  display: flex;
  flex-direction: column;
  box-sizing: border-box;
}

.cf-header { 
  padding: 16px 20px; 
  border-bottom: 1px solid var(--cf-border); 
  display: flex; 
  align-items: center; 
  justify-content: space-between;
  flex-shrink: 0;
}

.cf-title { 
  font: 600 16px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; 
}

.cf-close { 
  appearance: none; 
  background: transparent; 
  border: 0; 
  cursor: pointer; 
  padding: 6px; 
  border-radius: 8px; 
}

.cf-close:hover { 
  background: hsl(220 14% 96%); 
}

.cf-body { 
  display: flex;
  flex-direction: column;
  gap: 16px; 
  padding: 16px 20px;
  flex: 1;
  overflow-y: auto;
  min-height: 0;
  max-height: calc(100vh - 200px);
}

.cf-preview { 
  display: flex; 
  gap: 12px; 
  align-items: flex-start;
  flex-shrink: 0;
}

.cf-shot { 
  width: 100%; 
  max-height: min(300px, 40vh);
  object-fit: contain; 
  border-radius: 10px; 
  border: 1px solid var(--cf-border); 
  box-shadow: 0 10px 24px hsl(220 40% 2% / 0.15);
}

.cf-meta { 
  font-size: 12px; 
  color: var(--cf-muted);
  flex-shrink: 0;
}

.cf-fields { 
  display: grid; 
  gap: 12px;
  flex-shrink: 0;
}

.cf-field label { 
  display: block; 
  font: 600 12px/1.2 system-ui, -apple-system, Segoe UI, Roboto; 
  margin-bottom: 6px; 
  color: var(--cf-fg); 
}

.cf-input, .cf-select, .cf-textarea { 
  width: 100%; 
  box-sizing: border-box; 
  border: 1px solid var(--cf-border); 
  border-radius: 10px; 
  padding: 10px 12px; 
  background: var(--cf-bg); 
  color: var(--cf-fg); 
  font: 500 13px/1.4 system-ui, -apple-system, Segoe UI, Roboto; 
  outline: none; 
}

.cf-textarea { 
  min-height: 84px; 
  resize: vertical; 
}

.cf-row { 
  display: grid; 
  gap: 12px; 
  grid-template-columns: 1fr 1fr; 
}

.cf-footer { 
  display: flex; 
  align-items: center; 
  justify-content: space-between; 
  gap: 12px; 
  padding: 12px 20px 16px; 
  border-top: 1px solid var(--cf-border);
  flex-shrink: 0;
  background: var(--cf-surface);
  position: sticky;
  bottom: 0;
  z-index: 1;
}

.cf-btn { 
  appearance: none; 
  border: 0; 
  border-radius: 10px; 
  padding: 10px 14px; 
  font: 600 13px/1.2 system-ui, -apple-system, Segoe UI, Roboto; 
  cursor: pointer; 
}

.cf-btn.primary { 
  color: white; 
  background: linear-gradient(135deg, var(--cf-brand-start), var(--cf-brand-end)); 
  box-shadow: 0 10px 24px hsl(200 80% 40% / 0.35); 
}

.cf-btn.primary:hover { 
  filter: brightness(1.05) saturate(1.05); 
}

.cf-btn.ghost { 
  background: transparent; 
  color: var(--cf-fg); 
}

/* Responsive design for different screen sizes */
@media (max-width: 768px) {
  .cf-overlay {
    padding: 10px;
  }
  
  .cf-modal {
    max-height: calc(100vh - 20px);
  }
  
  .cf-body {
    padding: 12px 16px;
  }
  
  .cf-header {
    padding: 12px 16px;
  }
  
  .cf-footer {
    padding: 12px 16px 12px;
  }
}

@media (max-width: 640px) {
  .cf-modal { 
    margin: 0; 
  }
  
  .cf-row { 
    grid-template-columns: 1fr; 
  }
  
  .cf-shot {
    max-height: min(250px, 35vh);
  }
  
  .cf-footer {
    flex-direction: column;
    gap: 16px;
    align-items: stretch;
  }
  
  .cf-footer > div:last-child {
    display: flex;
    gap: 12px;
  }
  
  .cf-btn {
    flex: 1;
    justify-content: center;
  }
}

@media (max-height: 600px) {
  .cf-overlay {
    padding: 10px;
  }
  
  .cf-modal {
    max-height: calc(100vh - 20px);
  }
  
  .cf-shot {
    max-height: min(200px, 30vh);
  }
  
  .cf-body {
    gap: 12px;
    padding: 12px 20px;
    max-height: calc(100vh - 160px);
  }
}

@media (max-height: 500px) {
  .cf-overlay {
    padding: 5px;
  }
  
  .cf-modal {
    max-height: calc(100vh - 10px);
  }
  
  .cf-body {
    max-height: calc(100vh - 140px);
    gap: 8px;
    padding: 8px 16px;
  }
  
  .cf-header {
    padding: 8px 16px;
  }
  
  .cf-footer {
    padding: 8px 16px 8px;
  }
}

/* Ensure modal is always visible and scrollable */
.cf-modal {
  position: relative;
  top: 0;
  transform: none;
}

/* Smooth scrolling for body content */
.cf-body {
  scrollbar-width: thin;
  scrollbar-color: var(--cf-border) transparent;
}

.cf-body::-webkit-scrollbar {
  width: 6px;
}

.cf-body::-webkit-scrollbar-track {
  background: transparent;
}

.cf-body::-webkit-scrollbar-thumb {
  background-color: var(--cf-border);
  border-radius: 3px;
}
